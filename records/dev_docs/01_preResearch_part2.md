# 2023.04.11-2023.04.20 worklog
## 工作进展
本阶段主要进行开发环境的搭建与汇编语言的学习与使用，尝试在开发板上跑通一个最简单的c++程序，确保开发环境是好的，由于之前没有使用过汇编语言开发，本阶段用汇编语言实现基本的for循环，从中理解运算、移位、访存指令的具体使用方法
## 环境搭建
本次开发需要有gcc开发编译环境，但我们拿到板子的时候是没有的，用在linux上安装gcc的方式进行安装：
```
yum install gcc
yum install g++
```
输入密码后总是提示`permission denied`, 即使命令前面加上`sudo`也不行，之后直接切换到root用户登录，重新执行上面的命令就可以安装了，安装完成后，写了一个简单的cpp程序来验证环境是否安装成功
```
// in test.cpp
#include <iostream>
using namespace std;

int main()
{
    cout<<"hello loongson"<<endl;
    return 0;
}
```
编译测试程序并运行
```
g++ -o envtest test.cpp

./envtest
```
程序能够顺利执行，至此认为环境搭建成功。为了防止在开发过程中误删系统文件，后续开发仍然切换到普通用户下进行。

## 基于loongson Arch 汇编指令学习
* 购买专业书籍 《汇编语言编程基础 基于LoongsonArch》并阅读
* 参考资料：https://github.com/loongson/LoongArch-Documentation/releases/latest/download/LoongArch-Vol1-v1.02-CN.pdf
我们队伍针对提供的技术文档，总结常用的指令使用说明，总结内容在该链接下：https://spmv.yuque.com/org-wiki-spmv-bw43uy/bgtx7o/es0etw8w24zr0w47?singleDoc# 《龙芯架构指令集》
该链接中部分内容如下：
|指令| 类型| 使用说明|
|---|---|---|
|srli.d $rd,  $rj, ui6	|移位|将通用寄存器rj中[63:0]位数据逻辑右移{ui6}位，移位结果写入通用寄存器rd中|
|fld.d $fd,  $rj,  si12	|访存|从内存（$rj + 12位符号扩展立即数）取回一个8B的数据写入浮点寄存器fd。

## 实现基于汇编的加法运算
### 代码
```
    .text
    .align 2
    .globl add_f
    .type add_f, @function
add_f:
    add.w   $a0,    $a0,    $a1
    add.w   $a0,    $a0,    $a2
    add.w   $a0,    $a0,    $a3
    jr      $r1

```
### 运行结果
```
5.03131e-314
```

## 确定测试数据集
[ Sparse Suite Collection](https://sparse.tamu.edu/),这是一个稀疏矩阵的集合网站。稀疏矩阵是指具有大量零元素的矩阵。这个集合包含了来自科学、工程、数值算法和图论等领域的矩阵。这个集合的目的是为研究稀疏矩阵的数学、计算机科学和工程等领域的研究人员和从业者提供一个大而全面的测试矩阵集，用于评估和比较解决稀疏矩阵计算问题的算法，如矩阵分解、特征值问题和线性求解器等。

当涉及到稀疏矩阵时，有几个重要的特征值得关注，包括：

* 非零元素的密度：稀疏矩阵的密度是指矩阵中非零元素的数量与矩阵总元素数量的比率。如果一个矩阵的密度很低，也就是说它的大部分元素都是零，那么它就是一个稀疏矩阵。稀疏矩阵的密度通常用百分比表示。

* 矩阵的大小：矩阵的大小是指矩阵的行数和列数，通常用 $n \times m$ 表示，其中 $n$ 是行数，$m$ 是列数。

* 矩阵的结构：稀疏矩阵的结构指矩阵中非零元素的分布方式，例如对角线元素、上三角元素或下三角元素等。

* 矩阵的对称性：如果一个矩阵满足 $A_{i,j}=A_{j,i}$ 对于所有的 $i$ 和 $j$，那么它就是对称的。对称矩阵在许多应用中都很常见，因为它们具有许多良好的性质，例如它们的特征值是实数。


这些特征对于稀疏矩阵的算法设计和性能评估都非常重要。例如，对于稀疏矩阵的线性求解器，在选择合适的算法和参数时需要考虑矩阵的结构、大小、对称性和奇异性等因素。

这个网站上的数据集在关于测试样例的特性描述中给出了特征描述，方面我们使用，因此我们选择选择了22个具有代表性的稀疏矩阵进行测试。